"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{7975:(e,t,s)=>{s.d(t,{A:()=>er});var i=s(7876),a=s(7041),l=s(5770),n=s(1776),r=s(1198),c=s(1616),o=s(7441),d=s(9333),x=s(4232),u=s(3679),h=s(6059),m=s(5211),p=s(3246);function f(e){let{index:t,children:s}=e;return s[t]}var j=s(2588),v=s(8475),y=s(3976),g=s(5334);function N(e,t){try{let{name:s,icon:i}=r.VY[e],a=y.d.matsColors[s.toLowerCase()],l=[];for(let e=0;e<t;e++)l.push(i({height:30,width:30,fill:a,stroke:a}));return l}catch(e){return[]}}function b(e){let{trades:t}=e,{ui:{events:s}}=(0,o.i)(),[a,l]=(0,x.useState)(),[n,r]=(0,x.useState)(),[c,d]=(0,x.useState)(),u=[0,0,0,0,0],m=t.filter(e=>e.from===a).map(e=>e.count).sort();t.forEach(e=>{let{from:t}=e;u[t]=1});let p=+(void 0!==n)+ +(void 0!==c)+ +(void 0!==a),j=e=>(0,i.jsx)("button",{className:"hover:underline cursor-pointer -translate-y-[1px]",onClick:e,children:(0,i.jsx)(h.ed2,{size:15,color:"white"})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex gap-2 items-center -translate-y-2 opacity-70",children:(0,i.jsxs)(f,{index:p,children:[(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("p",{children:"Pick Offer"})}),(0,i.jsxs)(i.Fragment,{children:[j(()=>{l(void 0)}),(0,i.jsx)("p",{children:"Pick Deal"})]}),(0,i.jsxs)(i.Fragment,{children:[j(()=>{r(void 0)}),(0,i.jsx)("p",{children:"Pick Wanted"})]}),(0,i.jsxs)(i.Fragment,{children:[j(()=>{d(void 0)}),(0,i.jsx)("p",{children:"Confirm"})]})]})}),(0,i.jsxs)(f,{index:+(void 0!==n)+ +(void 0!==c)+ +(void 0!==a),children:[(0,i.jsx)("div",{className:"flex gap-5",children:u.map((e,t)=>0===e?null:(0,i.jsxs)("div",{className:"flex gap-2 hover:scale-90 transition-[opacity,scale] hover:opacity-75 cursor-pointer",onClick:()=>{l(t)},children:[" ",N(t,e)," "]}))}),(0,i.jsx)("div",{className:"flex flex-col items-center gap-5",children:m.map(e=>(0,i.jsx)("div",{className:"flex gap-2 hover:scale-90 transition-[opacity,scale] hover:opacity-75 cursor-pointer",onClick:()=>{r(e)},children:N(a,e)}))}),(0,i.jsx)("div",{className:"flex gap-5",children:[1,1,1,1,1].map((e,t)=>(0,i.jsxs)("div",{className:"flex gap-2 hover:scale-90 transition-[opacity,scale] hover:opacity-75 cursor-pointer",onClick:()=>{d(t)},children:[" ",N(t,e)," "]}))}),(0,i.jsx)("div",{className:"flex flex-col gap-2 hover:scale-90 transition-[opacity,scale] hover:opacity-75 cursor-pointer",children:(0,i.jsxs)("div",{onClick:()=>{s.emit("trade submit",{from:a,count:n,to:c})},className:"flex gap-5 items-center",children:[(0,i.jsx)("div",{className:"flex gap-2",children:N(a,n)}),(0,i.jsx)(v.Bp7,{}),(0,i.jsx)("div",{className:"flex gap-2",children:N(c,1)})]})})]})]})}function k(){let{client:{socket:e,id:t},turnId:s,ui:{dicesState:f,events:v,mapState:y},local:N,set:k}=(0,o.i)(),[w,S]=(0,x.useState)(!1),C=w||["ready","loading","picking 2 edges"].includes(y);v.on("dock 7 free",()=>{S(!1)}),v.on("7",()=>{S(!0)});let R=[{icon:"mine"===f?u.rat:m.OB8,header:"mine"===f?"Stop Turn":"Roll Dices"},{icon:r.jW.road,header:"Place Road",count:N.amounts.road},{icon:r.jW.settlement,header:"Place Settlement",count:N.amounts.settlement},{icon:r.jW.city,header:"Upgrade to City",count:N.amounts.city},{icon:r.jW.devcard,header:"Buy Development Card"},{icon:h.HO_,header:"Trade"}],z=(e,t)=>e,{parent:E}=function(){let{ui:{events:e},client:{socket:t}}=(0,o.i)(),[s,l]=(0,x.useState)(),r=(0,x.useRef)(null),c=()=>{try{r.current.click()}catch(e){}};return e.on("trade requests",e=>{e.sort((e,t)=>e.count-t.count),console.log("trades.trades",e),l(e)}),{parent:(o,d)=>(0,i.jsxs)(j.AM,{onOpenChange:s=>{!0===s&&(l(void 0),e.once("trade submit",e=>{let{from:s,to:i,count:a}=e;null==t||t.emit(n.a.APPLY_TRADE,{from:s,to:i,count:a}),c()}))},children:[(0,i.jsx)(j.Wv,{asChild:!0,children:(0,i.jsx)("button",{disabled:d,ref:r,children:o})}),(0,i.jsxs)(j.hl,{className:"flex flex-col justify-center items-center gap-2",children:[(0,i.jsx)("h1",{className:"font-medium text-xl font-[Rubik] text-center",children:"Trades"}),void 0===s?(0,i.jsx)(g.A,{}):(0,i.jsx)(b,{trades:s}),(0,i.jsxs)(a.$,{variant:"link",className:"cursor-pointer",children:[(0,h.HO_)({})," Offer a Trade"]})]})]})}}(),_=[z,z,z,z,z,E],M=[()=>{k(e=>({ui:{...e.ui,mapState:"ready"}})),"mine"===f?null==e||e.emit(n.a.STOP_TURN):null==e||e.emit(n.a.ROLL)},()=>{k(e=>({ui:{...e.ui,mapState:"picking edge"}})),v.once("picked edge",(t,s)=>{null==e||e.emit(n.a.BUY_ROAD,[t,s]),k(e=>({ui:{...e.ui,mapState:"ready"}}))})},()=>{k(e=>({ui:{...e.ui,mapState:"picking vertex"}})),v.once("picked vertex",t=>{null==e||e.emit(n.a.BUY_SETTLEMENT,t),k(e=>({ui:{...e.ui,mapState:"ready"}}))})},()=>{k(e=>({ui:{...e.ui,mapState:"picking vertex upgrade"}})),v.once("picked vertex upgrade",t=>{null==e||e.emit(n.a.BUY_CITY,t),k(e=>({ui:{...e.ui,mapState:"ready"}}))})},()=>{k(e=>({ui:{...e.ui,mapState:"ready"}})),null==e||e.emit(n.a.BUY_DEVCARD)},()=>{null==e||e.emit(n.a.REQUEST_TRADES)}];console.log("dicesState",f);let A="mine"!==f,$="picking area"===y||"picking 2 edges"===y||s!==t||"rolling"===f,L=[$,A||$||!(0,d.A)(N.materials).available(c.road),A||$||!(0,d.A)(N.materials).available(c.settlement),A||$||!(0,d.A)(N.materials).available(c.city),A||$||!(0,d.A)(N.materials).available(c.devcard),A||$||!1];return(0,i.jsxs)("div",{children:[(0,i.jsx)(p.t,{}),(0,i.jsxs)("div",{className:"relative z-30 flex flex-row-reverse border-1 rounded-2xl bg-accent gap-5 px-4 pb-1 pt-2 scale-110 items-center justify-around",children:[(0,i.jsx)("div",{className:"absolute -top-[32px]",children:(0,i.jsx)(a.$,{variant:"link",className:"cursor-pointer disabled:pointer-events-none disabled:opacity-0 opacity-50 hover:opacity-80 transition-opacity",disabled:C,onClick:()=>{k(e=>({ui:{...e.ui,mapState:"ready"}}))},children:"cancel picking"})}),R.map((e,t)=>{let{header:s,icon:n,count:r}=e;return _[t]((0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)(a.$,{variant:"ghost",className:"hover:animate-pulse cursor-pointer aspect-square hover:scale-125",onClick:M[t],disabled:L[t],children:[r?(0,i.jsx)("p",{className:"text-md opacity-65 font-[Rubik]",children:r}):null,n({color:"white",size:30})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:s})})]},s),L[t])})]})]})}var w=s(937),S=s(1649);let C="#111";function R(){return(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"relative  w-[30px] h-[30px] opacity-80 hover:opacity-100 transition-opacity",children:[r.SV[3].icon({size:15,color:C,className:"absolute top-0 z-20 translate-[7.5px]"}),(0,i.jsx)(S.w_r,{size:30,opacity:1,className:"absolute top-0 z-10"})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Longest Road Card"})})]})}function z(){return(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"relative  w-[30px] h-[30px] opacity-80 hover:opacity-100 transition-opacity",children:[r.n2[0].icon({size:15,color:C,className:"absolute top-0 z-20 translate-[7.5px]"}),(0,i.jsx)(S.w_r,{size:30,className:"absolute top-0 z-10"})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Largest Army Card"})})]})}function E(e){let{player:t,largestArmy:s,longestRoad:a}=e,{materials:n,devcards:c,name:o,victoryPoints:d,color:x,maxRoad:u,knightUsed:h}=t;console.log("client","victoryPoints",d),console.log("client","OnlinePlayerCard","maxRoad",u);let m=[d,n+c,h,u].flatMap((e,t)=>{var s;return[(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex gap-2 items-center opacity-65",children:[(0,i.jsx)("p",{className:"text-lg font-[Rubik] scale-90",children:e}),r.SV[t].icon({color:null!=(s=r.SV[t].color)?s:"white",opacity:.65,style:r.SV[t].shadow?{filter:r.SV[t].shadow}:{}})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:r.SV[t].name})})]},t),(0,i.jsx)("div",{className:"h-2 outline-1"})]});return m.pop(),(0,i.jsxs)("div",{className:"flex gap-2 px-4 py-1 items-center relative",children:[(0,i.jsxs)("div",{className:"absolute flex gap-0 pr-3 right-full",children:[a===x?(0,i.jsx)(R,{}):null,s===x?(0,i.jsx)(z,{}):null]}),(0,i.jsx)(w.j$i,{opacity:1,style:{filter:"drop-shadow(0px 0px 10px ".concat(r.lm[x],", drop-shadow(0px 0px 10px ").concat(r.lm[x]),animationDelay:"".concat(x/2,"s"),rotate:"90deg",scale:"0.7"},className:"animate-pulse",color:r.lm[x]}),(0,i.jsx)("h2",{className:"flex-1 mr-12 text-[20px]",children:o}),m]})}function _(e){let{}=e,{bank:{devcards:t,materials:s},largestArmy:a,longestRoad:n}=(0,o.i)();return(0,i.jsxs)("div",{className:"relative flex outline-1 rounded-sm gap-2 px-4 pb-1 pt-2 items-center justify-around",children:[(0,i.jsxs)("div",{className:"absolute flex gap-0 pr-1 right-full",children:[n<0?(0,i.jsx)(R,{}):null,a<0?(0,i.jsx)(z,{}):null]}),(0,i.jsx)("div",{className:"absolute -top-[50%] left-3 bg-sidebar translate-x-[-50] translate-y-[50%] text-[20px] px-5 font-medium",children:"Bank"}),s.flatMap((e,t)=>[(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex gap-2 items-center opacity-65",children:[(0,i.jsx)("p",{className:"text-lg font-[Rubik] scale-90",children:e}),r.VY[t].icon({stroke:"white",opacity:.65,fill:"white",width:20,height:20})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:r.VY[t].name})})]},t),(0,i.jsx)("div",{className:"h-2 outline-1"})]),(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex gap-2 items-center opacity-65",children:[(0,i.jsx)("p",{className:"text-lg font-[Rubik] scale-90",children:t.reduce((e,t)=>e+t)}),r.DU[1].icon({stroke:"white",opacity:.65,fill:"white",width:20,height:20})]})}),(0,i.jsx)(l.ZI,{children:r.DU[1].name})]})]})}var M=s(1352);class A{insert(e){let t=0,s=this.list.length;for(;t<s;){let i=Math.floor((t+s)/2);0>this.comparator(this.list[i],e)?t=i+1:s=i}this.list.splice(t,0,e)}map(e){return this.list.map(e)}forEach(e){this.list.forEach(e)}getItems(){return this.list}get size(){return this.list.length}constructor(e){this.list=[],this.comparator=e}}let $=new A((e,t)=>{let{date:s}=e,{date:i}=t;return s>i?-1:+(i>s)}),L=(e,t)=>{let[s,i]=(0,x.useState)(t),[a,l]=(0,x.useState)(t);return(0,x.useEffect)(()=>{let t=setTimeout(()=>{l(s)},e);return()=>{clearTimeout(t)}},[s]),[a,i,e=>{i(e),l(e)}]};var V=s(5870);let D=()=>{let[e,t]=(0,x.useState)(0);return()=>{t(e=>e+1)}};function O(e){let{className:t,...s}=e,{onlines:a,local:l,client:{socket:r}}=(0,o.i)(),c=(0,x.useRef)(null),[d,u,h]=L(1e3,!1),[m,p,f]=L(1e3,!1),j=D();(0,x.useEffect)(()=>{r&&(null==r||r.on(n.Q.MESSAGE,e=>{let{message:t,from:s,date:i}=e;$.insert({date:new Date(i),from:s,message:t}),h(!0),j()}))},[r]),(0,x.useEffect)(()=>{let e=c.current;if(!e)return;let t=()=>{u(!1)},s=()=>{h(!0)};return e.addEventListener("mouseleave",t),e.addEventListener("mouseenter",s),()=>{e.removeEventListener("mouseleave",t),e.removeEventListener("mouseenter",s)}},[c]);let v=(0,V.cn)(t,d||m?"opacity-100":"opacity-0","flex flex max-h-full h-full overflow-hidden");return(0,i.jsx)("div",{ref:c,className:v,style:{transition:"opacity .2s"},...s,children:(0,i.jsxs)("div",{className:(0,V.cn)("flex flex-col max-w-full w-full overflow-auto"),style:{transition:"translate .2s"},children:[(0,i.jsx)("div",{className:"flex-1 flex flex-col-reverse h-full overflow-auto gap-1 mb-2",children:$.map(e=>{let{date:t,from:s,message:n}=e,r=l.color===s?l.name:a.get(s).name;return function(e){let{message:t,name:s,time:a}=e;return(0,i.jsxs)("div",{className:"flex gap-1 font-[Rubik]",children:[(0,i.jsx)("p",{className:"font-extralight text-gray-400 opacity-75",children:a}),(0,i.jsx)("p",{className:"font-medium font-[Rubik] mr-1",children:s}),(0,i.jsx)("p",{children:t})]})}({message:n,time:t.toLocaleTimeString([],{minute:"2-digit",hour:"2-digit",hour12:!1}).replace(":",":"),name:r})})}),(0,i.jsx)("div",{className:"justify-end mb-10",children:(0,i.jsx)(M.p,{onFocus:()=>{f(!0)},onInput:()=>{f(!0)},onBlur:()=>{p(!1)},onKeyDown:e=>{let{key:t,currentTarget:s}=e;"Enter"===t&&(null==r||r.emit(n.a.MESSAGE,s.value),s.value="")},placeholder:"Write something to your friends",className:" focus:outline-0 font-[Rubik] bg-accent"})})]})})}var P=s(4428);function T(e){let{...t}=e;return(0,i.jsx)(P.bL,{"data-slot":"hover-card",...t})}function B(e){let{...t}=e;return(0,i.jsx)(P.l9,{"data-slot":"hover-card-trigger",...t})}function I(e){let{className:t,align:s="center",sideOffset:a=4,...l}=e;return(0,i.jsx)(P.ZL,{"data-slot":"hover-card-portal",children:(0,i.jsx)(P.UC,{"data-slot":"hover-card-content",align:s,sideOffset:a,className:(0,V.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}let Y=[!1,!1,!1,!1,!1,!0,!0,!0,!0,!1];function Z(e){let{}=e,{local:{materials:t,devcards:s,amounts:{road:a}},ui:{events:c,dicesState:d,mapState:u},set:h,client:{socket:m}}=(0,o.i)(),p=D();(0,x.useEffect)(()=>(c.on("render decks",p),()=>{c.off("render decks",p)}),[p]);let f=[...t,...s],j="mine"!==d||"picking 2 edges"===u,v=[!0,!0,!0,!0,!0,j,!0,j||0===a,j,j],g=[()=>{h(e=>({ui:{...e.ui,mapState:"picking area"}})),c.once("picked area",e=>{null==m||m.emit(n.a.MOVE_ROBBER,{areaOffset:e,useDevcard:!0})})},()=>{},()=>{h(e=>({ui:{...e.ui,mapState:"picking edge"}})),c.once("picked edge",(e,t)=>{h(e=>({ui:{...e.ui,mapState:"ready"}})),null==m||m.emit(n.a.DEV_ROADS,[e,t]),setTimeout(()=>{h(e=>({ui:{...e.ui,mapState:"picking 2 edges"}})),c.once("picked edge",(e,t)=>{null==m||m.emit(n.a.DEV_ROADS,[e,t]),h(e=>({ui:{...e.ui,mapState:"ready"}}))})},200)})},()=>{c.emit("plenty"),c.once("plenty give",e=>{null==m||m.emit(n.a.DEV_YEAROFPLENTY,e)})},()=>{c.emit("monopoly"),c.once("monopoly give",e=>{null==m||m.emit(n.a.DEV_MONOPOL,e)})}];return(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"relative flex scale-90 gap-2 px-7 pb-1 pt-3 items-center justify-around",children:f.map((e,t)=>{let s=t>4,{name:a,icon:n}=r.Xp[t],c=s?r.Xp[t].color:y.d.matsColors[r.Xp[t].name.toLocaleLowerCase()],o=Y[t]?{color:c,opacity:.2,size:25}:{stroke:c,opacity:.2,fill:c,width:30,height:30},d=Y[t]?{color:c,opacity:1,size:25}:{stroke:c,opacity:1,fill:c,width:30,height:30},x=r.Xp[t].icon(o),u=r.Xp[t].icon({...d,style:{filter:"drop-shadow(0px 0px 20px ".concat(c,")")}}),h=(0,i.jsxs)("button",{disabled:v[t]||0===e,onClick:()=>{g[t-5]()},className:(0,V.cn)("flex flex-row-reverse  items-center hover:opacity-100 opacity-65",t>4&&"not-disabled:cursor-pointer not-disabled:hover:scale-110 transition-transform not-disabled:hover:-translate-y-1"),children:[(0,i.jsx)("p",{className:"text-2xl w-5 -translate-x-4 translate-y-2 font-[Rubik] font-medium scale-70",children:e}),x]}),m=(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:h}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:a})})]},t),p=(0,i.jsxs)(T,{openDelay:.5,closeDelay:0,children:[(0,i.jsx)(B,{asChild:!0,children:h}),(0,i.jsxs)(I,{className:"pointer-events-none bg-accent w-60 flex gap-1 flex-col",children:[(0,i.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,i.jsx)("div",{className:"scale-70",children:u}),(0,i.jsx)("p",{className:"font-[Rubik]",children:a})]}),(0,i.jsx)("div",{className:"px-7 mb-3",children:(0,i.jsx)("hr",{})}),(0,i.jsx)("p",{className:"flex-1 px-2 font-light font-[Geist] text-center text-pretty text-sm opacity-60 flex justify-center items-center",children:r.Bl[t-5]}),(0,i.jsx)("div",{className:"px-7 mt-1",children:(0,i.jsx)("hr",{})}),(0,i.jsx)("p",{className:"text-center text-xs font-[Rubik] opacity-35",children:"Development card"})]})]},t);return s?p:m})})})}function U(){let{onlines:e,local:t,largestArmy:s,longestRoad:a,ui:{events:l}}=(0,o.i)(),n=D();(0,x.useEffect)(()=>(l.on("render decks",n),()=>{l.off("render decks",n)}),[n]);let r=[];return e.forEach(e=>r.push(E({player:e,largestArmy:s,longestRoad:a}),(0,i.jsx)("hr",{}))),r.push(E({player:{color:t.color,devcards:(0,d.A)(t.devcards).sum(),materials:(0,d.A)(t.materials).sum(),name:t.name,roads:t.roads,victoryPoints:t.victoryPoints,cities:[],settlements:[],maxRoad:t.maxRoad,knightUsed:t.knightUsed,ready:t.ready},largestArmy:s,longestRoad:a})),(0,i.jsx)("div",{className:"outline-1 rounded-sm flex flex-col gap-1 p-2",children:r})}var F=s(4258);let W=[m.jwr,m.Uo8,m.dAC,m.MXO,m.Pu$,m.MyP];function X(e){let{num:t,fired:s}=e;if(void 0===t)return;let[i,a]=(0,x.useState)(1),[l,n]=(0,x.useState)("");return(0,x.useEffect)(()=>{let e,i=async t=>{let s=(0,F.XU)(1,6);return(a(s),t<0)?Promise.resolve(s):(n("scale-80 animate-pulse blur-[2px] opacity-50 transition-none"),requestAnimationFrame(()=>{n("scale-100 transition-transform duration-200 ease-in-out blur-[1px] opacity-100")}),new Promise(s=>{e=setTimeout(async()=>{s(await i(t-100/(1e3*t)))},100/t)}))};return i(1).then(()=>{a(t),n("scale-130 transition-none"),setTimeout(()=>{s()},500),requestAnimationFrame(()=>{n("scale-100 transition-transform duration-500 ease-in-out")})}),()=>{clearTimeout(e)}},[t]),W[i-1]({className:l,size:50})}function q(){let{dices:e,ui:{events:t}}=(0,o.i)(),[s,a]=(0,x.useState)(0);return(0,x.useEffect)(()=>{a(0)},[e]),(0,x.useEffect)(()=>{s<2||t.emit("dices finished")},[s]),(0,i.jsxs)("div",{className:"h-15 justify-center flex",children:[(0,i.jsx)(X,{fired:()=>{a(e=>e+1)},num:void 0===e?void 0:e[0]}),(0,i.jsx)(X,{fired:()=>{a(e=>e+1)},num:void 0===e?void 0:e[1]})]})}var G=s(995);class H extends x.Component{static get instance(){return this._instance}render(){return console.log("state hidden",this.state.hiddenSet),(0,i.jsx)("div",{className:(0,V.cn)("z-40 top-0 left-0 h-full w-full absolute bg-black/50",0===this.state.hiddenSet.size&&"hidden")})}constructor(){super({}),this.hide=e=>{let t=new Set(this.state.hiddenSet);t.delete(e),this.setState(e=>({...e,hiddenSet:t}))},this.show=e=>{let t=new Set(this.state.hiddenSet);t.add(e),this.setState(e=>({...e,hiddenSet:t}))},H._instance=this,this.state={...this.state,hiddenSet:new Set}}}function Q(){let e="MonopolyStateShow",[t,s]=(0,x.useState)(!0),[a,l]=(0,x.useState)(0),{ui:{events:n},onlines:c,local:d}=(0,o.i)();n.on("monopol show",(e,t)=>{u(e,t)});let u=(t,i)=>{var a;s(!1),l(i),null==(a=H.instance)||a.show(e)},h=y.d.matsColors[r.VY[a].name.toLocaleLowerCase()];return(0,i.jsx)("div",{className:(0,V.cn)("absolute top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",t?"h-0 opacity-0  pointer-events-none":"pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex justify-center opacity-0 items-center flex-col",style:{animation:t?"":"hop 4s cubic-bezier(0,.96,1,1)"},onAnimationEnd:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e)},children:[(0,i.jsxs)("div",{className:"absolute top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",children:[r.n2.at(-1).icon({stroke:"white",opacity:.1,width:500,height:500,strokeWidth:1})," "]}),(0,i.jsx)("p",{className:"font-[Rubik] font-medium text-4xl drop-shadow-xl/25",children:"You've Been MONOPOLED!"}),(0,i.jsx)("div",{className:"h-2"}),(0,i.jsxs)("div",{className:"flex font-[Geist] drop-shadow-xl/25 font-medium text-2xl gap-2 justify-center items-center select-none",children:[r.VY[a].icon({stroke:h,opacity:1,fill:h,width:60,height:60}),(0,i.jsx)("p",{className:"",children:r.VY[a].name})]})]})})}function K(){let e="MonopolyState",[t,s]=(0,x.useState)(!0),[n,c]=(0,x.useState)(),{ui:{events:d}}=(0,o.i)();return d.on("monopoly",()=>{var t;s(!1),null==(t=H.instance)||t.show(e),c(void 0)}),(0,i.jsxs)("div",{className:(0,V.cn)(" hover:animate-none transition-all overflow-y-hidden relative duration-500 ease-in-out w-full z-50 rounded pt-3 pb-2 px-4",t?"h-0 opacity-0  pointer-events-none":"animate-pulse  pointer-events-auto opacity-100 outline-1 bg-accent"),children:[(0,i.jsx)("p",{className:"font-[Rubik] text-center mb-2",children:"Choose Material you want to Monopol!"}),(0,i.jsx)("div",{className:"flex gap-5 justify-center",children:r.VY.map((e,t)=>{let s=n===t?y.d.matsColors[e.name.toLocaleLowerCase()]:"white";return(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsx)("div",{onClick:()=>{n===t?c(void 0):c(t)},className:(0,V.cn)("flex flex-row-reverse  items-center  cursor-pointer select-none",n===t&&"scale-90"),children:e.icon({stroke:s,opacity:n===t?1:.2,fill:s,width:30,height:30})})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:e.name})})]},t)})}),(0,i.jsxs)("div",{className:"flex justify-center",children:[(0,i.jsx)(a.$,{onClick:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e),d.emit("monopoly give",n)},disabled:void 0===n,className:"cursor-pointer select-none mb-0 pb-0",variant:"link",children:"confirm"}),(0,i.jsx)(a.$,{onClick:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e)},className:"cursor-pointer select-none mb-0 pb-0",variant:"link",children:"cancel"})]})]})}function J(){let e="SevenMatsDropState",[t,s]=(0,x.useState)(!0),[n,c]=(0,x.useState)([0,0,0,0,0]),{local:{materials:u},ui:{events:h}}=(0,o.i)(),p=(0,x.useMemo)(()=>Math.floor((0,d.A)(u).sum()/2),[u]),f=(0,x.useMemo)(()=>(0,d.A)(n).sum(),[n]);return h.on("7",()=>{var t;s(!1),null==(t=H.instance)||t.show(e),c([0,0,0,0,0])}),(0,i.jsxs)("div",{className:(0,V.cn)(" hover:animate-none transition-all overflow-y-hidden relative duration-500 ease-in-out w-full z-50 rounded pt-3 pb-2 px-4",t?"h-0 opacity-0  pointer-events-none":"animate-pulse  pointer-events-auto opacity-100 outline-1 bg-accent"),children:[(0,i.jsx)("p",{className:"font-[Rubik] text-center mb-2",children:"You have more then 6 materials"}),(0,i.jsx)("div",{className:"flex gap-5 justify-center",children:r.VY.map((e,t)=>(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{onClick:()=>{let e=[...n];e[t]=Math.min(Math.min(e[t]+p-f,u[t]),e[t]+1),c(e)},onContextMenu:e=>{e.preventDefault();let s=[...n];s[t]=Math.max(0,s[t]-1),c(s)},className:"flex flex-row-reverse  items-center  cursor-pointer select-none",children:[(0,i.jsx)("p",{className:"text-2xl absolute translate-x-2 text-red-400 translate-y-2 font-[Rubik] font-medium scale-70",children:n[t]}),e.icon({stroke:"white",opacity:.2,fill:"white",width:30,height:30})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:e.name})})]},t))}),(0,i.jsxs)("div",{className:"flex font-[Rubik] scale-90 text-xs opacity-50 justify-center mt-1",children:[(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{className:"underline mr-[0.5ch]",children:"RMB"}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Right Mouse Button"})})]}),(0,i.jsx)("p",{children:" to give up more | "}),(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{className:"underline mx-[0.5ch]",children:"LMB"}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Left Mouse Button"})})]}),(0,i.jsx)("p",{children:" to give up less"})]}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)(a.$,{onClick:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e),h.emit("7 give",n)},disabled:f!=p,className:"cursor-pointer select-none mb-0 pb-0",variant:"link",children:[(0,i.jsx)(m.Lib,{}),f==p?"Retrieve ".concat(f," Materials!"):"Retrieve more ".concat(p-f," materials!")]})})]})}function ee(){let e="TwoYearOfPlentyState",[t,s]=(0,x.useState)(!0),[n,c]=(0,x.useState)([0,0,0,0,0]),{local:{materials:u},bank:{materials:h},ui:{events:m}}=(0,o.i)(),p=(0,x.useMemo)(()=>(0,d.A)(n).sum(),[n]);return m.on("plenty",()=>{var t;s(!1),null==(t=H.instance)||t.show(e),c([0,0,0,0,0])}),(0,i.jsxs)("div",{className:(0,V.cn)(" hover:animate-none transition-all overflow-y-hidden relative duration-500 ease-in-out w-full z-50 rounded pt-3 pb-2 px-4",t?"h-0 opacity-0  pointer-events-none":"animate-pulse  pointer-events-auto opacity-100 outline-1 bg-accent"),children:[(0,i.jsx)("p",{className:"font-[Rubik] text-center mb-2",children:"Choose 2 materials you want!"}),(0,i.jsx)("div",{className:"flex gap-5 justify-center",children:r.VY.map((e,t)=>(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{onClick:()=>{let e=[...n];e[t]=Math.min(Math.min(e[t]+2-p,h[t]),e[t]+1),c(e)},onContextMenu:e=>{e.preventDefault();let s=[...n];s[t]=Math.max(0,s[t]-1),c(s)},className:"flex flex-row-reverse  items-center  cursor-pointer select-none",children:[(0,i.jsx)("p",{className:"text-2xl absolute translate-x-2 text-green-900 translate-y-2 font-[Rubik] font-medium scale-70",children:n[t]}),e.icon({stroke:"white",opacity:.2,fill:"white",width:30,height:30})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:e.name})})]},t))}),(0,i.jsxs)("div",{className:"flex flex-col items-center font-[Rubik] scale-90 text-xs opacity-50 justify-center mt-1",children:[(0,i.jsxs)("div",{className:"flex justify-center",children:[(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{className:"underline mr-[0.5ch]",children:"RMB"}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Right Mouse Button"})})]}),(0,i.jsx)("p",{children:" to give up more | "}),(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{className:"underline mx-[0.5ch]",children:"LMB"}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Left Mouse Button"})})]}),(0,i.jsx)("p",{children:" to give up less"})]}),(0,i.jsx)("p",{children:"you cant take more then the bank has to offer"})]}),(0,i.jsxs)("div",{className:"flex justify-center",children:[(0,i.jsx)(a.$,{onClick:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e),m.emit("plenty give",n)},disabled:2!=p,className:"cursor-pointer select-none mb-0 pb-0",variant:"link",children:"confirm"}),(0,i.jsx)(a.$,{onClick:()=>{var t;s(!0),null==(t=H.instance)||t.hide(e)},className:"cursor-pointer select-none mb-0 pb-0",variant:"link",children:"cancel"})]})]})}H._instance=null;var et=s(9099);let es="drop-shadow(0px 0px 5px (#ffffff66))";function ei(){return(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{asChild:!0,children:(0,i.jsxs)("div",{className:"relative  w-[30px] h-[30px] transition-opacity",children:[r.SV[0].icon({size:15,color:"black",className:"absolute top-0 z-20 translate-[7.5px]"}),(0,i.jsx)(S.w_r,{color:"white",size:30,style:{filter:es},className:"absolute top-0 z-10"})]})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Largest Army Card"})})]})}function ea(){let e="WinState",t=(0,et.useRouter)(),[s,n]=(0,x.useState)(!0),[c,d]=(0,x.useState)(0),[m,p]=(0,x.useState)([]),{ui:{events:f},onlines:j,local:v}=(0,o.i)();if(f.on("win",(t,s)=>{var i;n(!1),null==(i=H.instance)||i.show(e),d(t),p(s)}),(0,x.useEffect)(()=>{var t;n(!0),null==(t=H.instance)||t.hide(e)},[]),0===m.length)return null;let y=[v,...Array.from(j.values())].map(e=>{let{color:t,name:s}=e,{vp:i,vpdc:a}=m.find(e=>e.id===t);return{name:s,color:t,vp:i,vpdc:a}}).find(e=>e.color===c);return(0,i.jsx)("div",{className:(0,V.cn)("absolute top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",s?"h-0 opacity-0  pointer-events-none":"pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex justify-center  items-center flex-col",style:{animation:s?"":"show 4s cubic-bezier(0,.96,1,1)"},children:[(0,i.jsxs)("div",{className:"absolute flex gap-2 items-center drop-shadow-lg/50 font-[Rubik] text-2xl font-medium top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",children:[(0,i.jsxs)("div",{className:"absolute top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",children:[(0,u.Hu1)({size:500,color:"#050505",opacity:1,style:{filter:"drop-shadow(0px 0px 50px #ffffff11) drop-shadow(0px 0px 2px #222)"}})," "]}),(0,i.jsxs)("div",{style:{translate:"0px 175px"},className:"flex justify-center items-center z-60 w-[305px]",children:[(0,i.jsxs)("div",{style:{color:r.SV[0].color,filter:r.SV[0].shadow},className:"flex gap-2 items-center",children:[y.vp,(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{children:r.SV[0].icon({color:r.SV[0].color,style:{filter:r.SV[0].shadow}})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Victory Points"})})]})]}),(0,i.jsx)("div",{style:{backgroundColor:r.lm[y.color+1]},className:"z-60 flex-1 h-1.25 opacity-50 mx-7 rounded-full"}),(0,i.jsxs)("div",{style:{color:"white",filter:es},className:"flex gap-2 items-center",children:[y.vpdc,(0,i.jsxs)(l.m_,{children:[(0,i.jsx)(l.k$,{children:(0,i.jsx)(ei,{})}),(0,i.jsx)(l.ZI,{children:(0,i.jsx)("p",{children:"Victory Points Development Card"})})]})]})]})]}),(0,i.jsx)("div",{className:"h-75"}),(0,i.jsx)("h1",{className:"font-[Rubik] z-60 font-light opacity-30 text-2xl",children:"And we got a winner"}),(0,i.jsx)("div",{className:"flex flex-col gap-2 items-center",children:(0,i.jsx)("h1",{className:"font-[Rubik] z-60 font-medium text-7xl",children:y.name})}),(0,i.jsx)("div",{className:"h-50 flex flex-col justify-end",children:(0,i.jsx)("div",{className:"flex -translate-y-15 z-60 justify-center items-center",children:(0,i.jsxs)(a.$,{variant:"link",onClick:()=>{t.push("/")},className:"cursor-pointer z-60",children:[(0,i.jsx)(h.ed2,{})," Return to home page"]})})})]})})}var el=s(3339);function en(){let e="StopMidgameState",t=(0,et.useRouter)(),{ui:{events:s}}=(0,o.i)(),[l,n]=(0,x.useState)(!0);return s.on("stop midgame",()=>{var t;console.log("got here"),n(!1),null==(t=H.instance)||t.show(e)}),(0,x.useEffect)(()=>()=>{var t;n(!0),null==(t=H.instance)||t.hide(e)},[]),(0,i.jsx)("div",{className:(0,V.cn)("absolute top-[50%] z-50 left-[50%] -translate-x-[50%] -translate-y-[50%]",l?"h-0 opacity-0  pointer-events-none":"pointer-events-auto"),children:(0,i.jsxs)("div",{className:"flex justify-center  items-center flex-col",style:{animation:l?"":"show 4s cubic-bezier(0,.96,1,1)"},children:[(0,i.jsx)("div",{className:"h-50"}),(0,i.jsx)("h1",{className:"font-[Rubik] z-60 drop-shadow-2xl/100 font-medium opacity-100 text-5xl",children:"A player left the game"}),(0,i.jsx)("div",{className:"h-50 flex flex-col justify-end",children:(0,i.jsx)("div",{className:"flex -translate-y-15 z-60 justify-center items-center",children:(0,i.jsxs)(a.$,{variant:"link",onClick:()=>{t.push("/")},className:"cursor-pointer z-60",children:[(0,i.jsx)(h.ed2,{})," Return to home page"]})})})]})})}function er(){return(0,i.jsxs)("div",{className:"flex absolute w-[100%] h-[100%] top-0 left-0",children:[(0,i.jsx)(H,{}),(0,i.jsx)(Q,{}),(0,i.jsx)(ea,{}),(0,i.jsx)(en,{}),(0,i.jsx)("div",{className:"absolute pt-32 h-full",children:(0,i.jsxs)("div",{className:"flex flex-col gap-3 px-5 w-[333px] h-full",children:[(0,i.jsx)("h1",{className:"text-6xl text-center font-bold ",children:"Catan"}),(0,i.jsx)("a",{href:"https://itaylayzer.github.io/",className:"mb-5 font-mono text-center text-muted-foreground -translate-y-4",children:"@itaylayzer"}),(0,i.jsx)("div",{className:"h-min",children:(0,i.jsx)(q,{})}),(0,i.jsx)(J,{}),(0,i.jsx)(ee,{}),(0,i.jsx)(K,{})]})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col gap-3 items-center",children:[(0,i.jsx)(G.A,{}),(0,i.jsx)(k,{}),(0,i.jsx)(Z,{}),(0,i.jsx)("div",{className:"h-5"})]}),(0,i.jsx)("div",{className:"right-0 absolute pt-32 h-full",children:(0,i.jsxs)("div",{className:"flex flex-col gap-3 px-5 h-full",children:[(0,i.jsxs)(a.$,{onClick:()=>{window.open("/catan.io/store","_blank")},className:"absolute right-7 -translate-y-8 cursor-pointer z-20",variant:"link",children:[(0,i.jsx)(el.nZo,{})," store menu"]}),(0,i.jsx)(_,{}),(0,i.jsx)(U,{}),(0,i.jsx)(O,{className:"flex-1 "})]})})]})}}}]);