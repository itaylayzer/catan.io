(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{6180:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/lobby",function(){return a(8583)}])},8583:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(7876),l=a(7975),r=a(5870),n=a(4232);function c(e){let{text:t,className:a,onClick:l,...c}=e,[i,o]=(0,n.useState)(!1);return(0,s.jsx)("p",{...c,className:(0,r.cn)(a,"select-none",i?"font-light":"cursor-pointer z-[100]"),onClick:()=>{try{if(!0===i)return;navigator.clipboard.writeText(t),o(!0),setTimeout(()=>{o(!1)},1800)}catch(e){console.error("click copybutton err",e)}},children:i?"copied":t})}var i=a(5334),o=a(7041),u=a(1776),d=a(1198),x=a(8482),f=a(7441),h=a(7350),m=a(7328),p=a.n(m),j=a(4e3),y=a(9099);function b(e){let{code:t}=e,{ui:{gameStarted:a},local:n,onlines:i,client:{socket:x}}=(0,f.i)(),h=[n,...Array.from(i.values())].map(e=>{let{color:t,name:a,ready:s}=e;return{color:t,name:a,ready:s}}),{ready:m}=n,p=(0,l.A)();return a?p:(0,s.jsxs)("div",{className:"absolute left-0 top-0 w-full h-full flex justify-center items-center flex-col gap-1",children:[(0,s.jsx)("p",{className:"opacity-70",children:"share this code to invite others"}),(0,s.jsx)(c,{className:"text-4xl font-[Rubik] font-medium",text:t}),(0,s.jsx)("div",{className:"h-1"}),(0,s.jsx)("div",{className:"flex gap-2",children:h.map(e=>(0,s.jsxs)("div",{className:(0,r.cn)("transition-[background-color] px-5  rounded py-2 text-1xl text-center font-[Rubik] flex flex-col",e.ready?"text-green-700":"bg-transparent"),children:[e.name,(0,s.jsx)("div",{className:"w-10 h-0.5 rounded-full opacity-50",style:{backgroundColor:d.lm[e.color]}})]}))}),(0,s.jsx)("div",{className:"h-5"}),(0,s.jsx)(o.$,{variant:"link",className:"cursor-pointer",onClick:()=>{null==x||x.emit(u.a.READY)},children:m?"Unready":"Ready"})]})}function N(){let e=(0,y.useRouter)(),{set:t}=(0,f.i)(),a=(0,j.useSearchParams)().get("code"),l=(0,j.useSearchParams)().get("name");(0,n.useEffect)(()=>{l&&t(e=>({local:{...e.local,name:l}}))},[l]);let{client:{socket:r},ui:{events:c},setSocket:u}=(0,f.i)(),[d,m]=(0,n.useState)();return(0,n.useEffect)(()=>{a&&(async()=>{try{let e=await (0,x.io)((0,h._)(a));u(e),window.addEventListener("unload",()=>{e.disconnect()})}catch(e){m(e)}})()},[a]),c.on("status",e=>{m(e)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p(),{children:(0,s.jsx)("title",{children:"Catan.io | Lobby"})}),d?(0,s.jsxs)("div",{className:"absolute top-[50%] left-[50%] flex flex-col gap-2 justify-center items-center -translate-[50%]",children:[(0,s.jsx)("br",{}),(0,s.jsx)("h1",{className:"font-[Rubik] text-red-500 opacity-80 font-extralight text-3xl",children:"Error has Occoured"}),(0,s.jsx)("h1",{className:"font-[Rubik]  opacity-100 font-extralight text-5xl",children:d}),(0,s.jsx)("br",{}),(0,s.jsxs)(o.$,{variant:"link",onClick:()=>{e.replace("/")},className:"cursor-pointer transition-opacity opacity-50 hover:opacity-80",children:[" ","go back to home page"]})]}):r?(0,s.jsx)(b,{code:a}):(0,s.jsx)("div",{className:"absolute top-[50%] left-[50%] flex flex-col gap-2 justify-center items-center -translate-[50%]",children:(0,s.jsx)(i.A,{})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,585,938,713,517,155,629,241,942,432,40,966,779,115,975,636,593,792],()=>t(6180)),_N_E=e.O()}]);